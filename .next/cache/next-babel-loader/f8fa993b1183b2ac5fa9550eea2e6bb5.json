{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { forwardRef, useImperativeHandle, useState, useRef, useEffect } from \"react\";\nimport dpgBadge from \"../public/dpgBadge.svg\";\nimport UseWindowDimensions from \"./UseWindowDimensions\";\nconst SearchBox = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    0: menuOpen,\n    1: setMenuOpen\n  } = useState(false);\n  const textRef = useRef();\n  const {\n    0: inputValue,\n    1: setInputValue\n  } = useState(props.selectedGood ? props.selectedGood : props.selectedCountry ? props.selectedCountry : \"\");\n  const {\n    width\n  } = UseWindowDimensions();\n\n  const handleMouseOver = () => {\n    !menuOpen && setMenuOpen(true);\n  };\n\n  const handleMouseLeave = () => {\n    menuOpen && setMenuOpen(false);\n  };\n\n  const handleMenuClick = () => {\n    !menuOpen && setMenuOpen(true);\n  };\n\n  const handleMenuSelect = () => {\n    menuOpen && setMenuOpen(false);\n  };\n\n  const {\n    0: searchFocused,\n    1: setSearchFocused\n  } = useState(false);\n\n  const onFocus = () => setSearchFocused(true);\n\n  const onBlur = () => setSearchFocused(false);\n\n  const handleSelect = (item, event) => {\n    event.preventDefault(); // Here, we invoke the callback with the new value\n\n    setInputValue(item.name);\n    props.onSelectGood(item);\n  };\n\n  const handleSelectCountry = (item, event) => {\n    event.preventDefault(); // Here, we invoke the callback with the new value\n\n    setInputValue(item.name);\n    props.onSelectCountry(item.code);\n  };\n\n  const handleClear = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setInputValue(\"\");\n    props.clearSelectedGood();\n  };\n\n  const handleChangeInput = event => {\n    setInputValue(event.target.value);\n  };\n\n  const handleInputSize = element => {\n    element.style.height = \"2rem\";\n    element.style.height = element.scrollHeight + \"px\";\n  };\n\n  const changeInput = value => {\n    setInputValue(value);\n  };\n\n  useImperativeHandle(ref, () => {\n    return {\n      changeInput: changeInput\n    };\n  });\n  useEffect(() => {\n    handleInputSize(textRef.current); // code to run after render goes here\n  });\n  return __jsx(\"div\", {\n    className: \"selectContainer\"\n  }, __jsx(\"div\", {\n    onClick: handleMenuClick,\n    onMouseOver: handleMouseOver,\n    onMouseLeave: handleMouseLeave,\n    id: \"dg-menu\"\n  }, __jsx(\"textarea\", {\n    ref: textRef,\n    onFocus: onFocus,\n    onBlur: e => onBlur(e),\n    className: \"searchInput\",\n    type: \"text\",\n    value: inputValue,\n    placeholder: \"Select a digital good or country\",\n    onChange: e => handleChangeInput(e)\n  }), __jsx(\"span\", {\n    className: menuOpen || searchFocused ? \"arrow up active\" : \"arrow down active\"\n  }), __jsx(\"div\", {\n    onClick: handleMenuSelect,\n    onMouseLeave: handleMouseLeave,\n    id: \"dg-menu-dropdown\",\n    className: menuOpen || searchFocused ? \"active\" : \"\"\n  }, props.goods.filter(el => el.name.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1).sort((a, b) => a.name.localeCompare(b.name)).map((item, index) => __jsx(\"a\", {\n    key: item.name + index,\n    href: \"#\",\n    onClick: e => handleSelect(item, e)\n  }, item.name, width > 1008 && __jsx(\"img\", {\n    width: \"45px\",\n    height: \"auto\",\n    src: dpgBadge\n  }))), Object.values(props.countries).filter(el => el.name.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1).sort((a, b) => a.name.localeCompare(b.name)).map((item, index) => __jsx(\"a\", {\n    key: item.name + index,\n    href: \"#\",\n    onClick: e => handleSelectCountry(item, e)\n  }, item.name)))), __jsx(\"div\", {\n    className: \"closeIcon\",\n    onClick: e => handleClear(e)\n  }, __jsx(\"span\", null, \"x\")));\n});\nexport default SearchBox;","map":null,"metadata":{},"sourceType":"module"}