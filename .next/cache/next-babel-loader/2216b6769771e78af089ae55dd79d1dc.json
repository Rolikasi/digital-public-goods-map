{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/rolikasi/outreachy/digital-public-goods-map/components/searchBox.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { forwardRef, useImperativeHandle, useState, useRef, useEffect } from \"react\";\nimport dpgBadge from \"../public/dpgBadge.svg\";\nimport UseWindowDimensions from \"./UseWindowDimensions\";\nvar SearchBox = /*#__PURE__*/forwardRef(_c = _s(function (props, ref) {\n  _s();\n\n  var _useState = useState(false),\n      menuOpen = _useState[0],\n      setMenuOpen = _useState[1];\n\n  var textRef = useRef();\n\n  var _useState2 = useState(props.selectedGood ? props.selectedGood : props.selectedCountry ? props.selectedCountry : \"\"),\n      inputValue = _useState2[0],\n      setInputValue = _useState2[1];\n\n  var _UseWindowDimensions = UseWindowDimensions(),\n      width = _UseWindowDimensions.width;\n\n  var handleMouseOver = function handleMouseOver() {\n    !menuOpen && setMenuOpen(true);\n  };\n\n  var handleMouseLeave = function handleMouseLeave() {\n    menuOpen && setMenuOpen(false);\n  };\n\n  var handleMenuClick = function handleMenuClick() {\n    !menuOpen && setMenuOpen(true);\n  };\n\n  var handleMenuSelect = function handleMenuSelect() {\n    menuOpen && setMenuOpen(false);\n  };\n\n  var _useState3 = useState(false),\n      searchFocused = _useState3[0],\n      setSearchFocused = _useState3[1];\n\n  var onFocus = function onFocus() {\n    return setSearchFocused(true);\n  };\n\n  var _onBlur = function onBlur() {\n    return setSearchFocused(false);\n  };\n\n  var handleSelect = function handleSelect(item, event) {\n    event.preventDefault(); // Here, we invoke the callback with the new value\n\n    setInputValue(item.name);\n    props.onSelectGood(item);\n  };\n\n  var handleSelectCountry = function handleSelectCountry(item, event) {\n    event.preventDefault(); // Here, we invoke the callback with the new value\n\n    setInputValue(item.name);\n    props.onSelectCountry(item.code);\n  };\n\n  var handleClear = function handleClear(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    setInputValue(\"\");\n    props.clearSelectedGood();\n  };\n\n  var handleChangeInput = function handleChangeInput(event) {\n    setInputValue(event.target.value);\n  };\n\n  var handleInputSize = function handleInputSize(element) {\n    element.style.height = \"2rem\";\n    element.style.height = element.scrollHeight + \"px\";\n  };\n\n  var changeInput = function changeInput(value) {\n    setInputValue(value);\n  };\n\n  useImperativeHandle(ref, function () {\n    return {\n      changeInput: changeInput\n    };\n  });\n  useEffect(function () {\n    handleInputSize(textRef.current); // code to run after render goes here\n  });\n  return __jsx(\"div\", {\n    className: \"selectContainer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    onClick: handleMenuClick,\n    onMouseOver: handleMouseOver,\n    onMouseLeave: handleMouseLeave,\n    id: \"dg-menu\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, __jsx(\"textarea\", {\n    ref: textRef,\n    onFocus: onFocus,\n    onBlur: function onBlur(e) {\n      return _onBlur(e);\n    },\n    className: \"searchInput\",\n    type: \"text\",\n    value: inputValue,\n    placeholder: \"Select a digital good or country\",\n    onChange: function onChange(e) {\n      return handleChangeInput(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), __jsx(\"span\", {\n    className: menuOpen || searchFocused ? \"arrow up active\" : \"arrow down active\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    onClick: handleMenuSelect,\n    onMouseLeave: handleMouseLeave,\n    id: \"dg-menu-dropdown\",\n    className: menuOpen || searchFocused ? \"active\" : \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, props.goods.filter(function (el) {\n    return el.name.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1;\n  }).sort(function (a, b) {\n    return a.name.localeCompare(b.name);\n  }).map(function (item, index) {\n    return __jsx(\"a\", {\n      key: item.name + index,\n      href: \"#\",\n      onClick: function onClick(e) {\n        return handleSelect(item, e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, item.name, width > 1008 && __jsx(\"img\", {\n      width: \"45px\",\n      height: \"auto\",\n      src: dpgBadge,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 34\n      }\n    }));\n  }), Object.values(props.countries).filter(function (el) {\n    return el.name.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1;\n  }).sort(function (a, b) {\n    return a.name.localeCompare(b.name);\n  }).map(function (item, index) {\n    return __jsx(\"a\", {\n      key: item.name + index,\n      href: \"#\",\n      onClick: function onClick(e) {\n        return handleSelectCountry(item, e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }, item.name);\n  }))), __jsx(\"div\", {\n    className: \"closeIcon\",\n    onClick: function onClick(e) {\n      return handleClear(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, \"x\")));\n}, \"GP1xQeJAwBasoIoGcvrZr8qlzVU=\", false, function () {\n  return [useImperativeHandle];\n}));\n_c2 = SearchBox;\nexport default SearchBox;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SearchBox$forwardRef\");\n$RefreshReg$(_c2, \"SearchBox\");","map":{"version":3,"sources":["/home/rolikasi/outreachy/digital-public-goods-map/components/searchBox.js"],"names":["React","forwardRef","useImperativeHandle","useState","useRef","useEffect","dpgBadge","UseWindowDimensions","SearchBox","props","ref","menuOpen","setMenuOpen","textRef","selectedGood","selectedCountry","inputValue","setInputValue","width","handleMouseOver","handleMouseLeave","handleMenuClick","handleMenuSelect","searchFocused","setSearchFocused","onFocus","onBlur","handleSelect","item","event","preventDefault","name","onSelectGood","handleSelectCountry","onSelectCountry","code","handleClear","stopPropagation","clearSelectedGood","handleChangeInput","target","value","handleInputSize","element","style","height","scrollHeight","changeInput","current","e","goods","filter","el","toLowerCase","indexOf","sort","a","b","localeCompare","map","index","Object","values","countries"],"mappings":"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","sourcesContent":["import React, {forwardRef, useImperativeHandle, useState, useRef, useEffect} from \"react\";\nimport dpgBadge from \"../public/dpgBadge.svg\";\nimport UseWindowDimensions from \"./UseWindowDimensions\";\n\nconst SearchBox = forwardRef((props, ref) => {\n  const [menuOpen, setMenuOpen] = useState(false);\n  const textRef = useRef();\n  const [inputValue, setInputValue] = useState(\n    props.selectedGood\n      ? props.selectedGood\n      : props.selectedCountry\n      ? props.selectedCountry\n      : \"\"\n  );\n  const {width} = UseWindowDimensions();\n  const handleMouseOver = () => {\n    !menuOpen && setMenuOpen(true);\n  };\n  const handleMouseLeave = () => {\n    menuOpen && setMenuOpen(false);\n  };\n  const handleMenuClick = () => {\n    !menuOpen && setMenuOpen(true);\n  };\n  const handleMenuSelect = () => {\n    menuOpen && setMenuOpen(false);\n  };\n  const [searchFocused, setSearchFocused] = useState(false);\n  const onFocus = () => setSearchFocused(true);\n  const onBlur = () => setSearchFocused(false);\n  const handleSelect = (item, event) => {\n    event.preventDefault();\n    // Here, we invoke the callback with the new value\n    setInputValue(item.name);\n    props.onSelectGood(item);\n  };\n  const handleSelectCountry = (item, event) => {\n    event.preventDefault();\n    // Here, we invoke the callback with the new value\n    setInputValue(item.name);\n    props.onSelectCountry(item.code);\n  };\n  const handleClear = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setInputValue(\"\");\n    props.clearSelectedGood();\n  };\n  const handleChangeInput = (event) => {\n    setInputValue(event.target.value);\n  };\n  const handleInputSize = (element) => {\n    element.style.height = \"2rem\";\n    element.style.height = element.scrollHeight + \"px\";\n  };\n  const changeInput = (value) => {\n    setInputValue(value);\n  };\n  useImperativeHandle(ref, () => {\n    return {\n      changeInput: changeInput,\n    };\n  });\n  useEffect(() => {\n    handleInputSize(textRef.current);\n    // code to run after render goes here\n  });\n\n  return (\n    <div className=\"selectContainer\">\n      <div\n        onClick={handleMenuClick}\n        onMouseOver={handleMouseOver}\n        onMouseLeave={handleMouseLeave}\n        id=\"dg-menu\"\n      >\n        <textarea\n          ref={textRef}\n          onFocus={onFocus}\n          onBlur={(e) => onBlur(e)}\n          className=\"searchInput\"\n          type=\"text\"\n          value={inputValue}\n          placeholder=\"Select a digital good or country\"\n          onChange={(e) => handleChangeInput(e)}\n        ></textarea>\n        <span\n          className={menuOpen || searchFocused ? \"arrow up active\" : \"arrow down active\"}\n        ></span>\n        <div\n          onClick={handleMenuSelect}\n          onMouseLeave={handleMouseLeave}\n          id=\"dg-menu-dropdown\"\n          className={menuOpen || searchFocused ? \"active\" : \"\"}\n        >\n          {props.goods\n            .filter(\n              (el) => el.name.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1\n            )\n            .sort((a, b) => a.name.localeCompare(b.name))\n            .map((item, index) => (\n              <a key={item.name + index} href=\"#\" onClick={(e) => handleSelect(item, e)}>\n                {item.name}\n                {width > 1008 && <img width=\"45px\" height=\"auto\" src={dpgBadge}></img>}\n              </a>\n            ))}\n          {Object.values(props.countries)\n            .filter(\n              (el) => el.name.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1\n            )\n            .sort((a, b) => a.name.localeCompare(b.name))\n            .map((item, index) => (\n              <a\n                key={item.name + index}\n                href=\"#\"\n                onClick={(e) => handleSelectCountry(item, e)}\n              >\n                {item.name}\n              </a>\n            ))}\n        </div>\n      </div>\n      <div className=\"closeIcon\" onClick={(e) => handleClear(e)}>\n        <span>x</span>\n      </div>\n    </div>\n  );\n});\nexport default SearchBox;\n"]},"metadata":{},"sourceType":"module"}